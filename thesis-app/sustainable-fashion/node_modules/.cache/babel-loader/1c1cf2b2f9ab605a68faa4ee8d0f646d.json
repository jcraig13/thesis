{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"slider\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"days-slider\"\n}, \"Number of forecasts to show:\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = [\"height\", \"width\"];\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"g\", {\n  class: \"bars\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = [_hoisted_3];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"div\", null, _toDisplayString($data.shortForecast), 1\n  /* TEXT */\n  ), (_openBlock(), _createElementBlock(\"svg\", {\n    height: $props.height,\n    width: $props.width\n  }, _hoisted_4, 8\n  /* PROPS */\n  , _hoisted_2))]);\n}","map":{"version":3,"mappings":";;gCAEIA,oBAEM,KAFN,EAEM;AAFDC,OAAK,EAAC;AAEL,CAFN,EAAmB,cACjBD,oBAA6D,OAA7D,EAA6D;AAAtDE,KAAG,EAAC;AAAkD,CAA7D,EAAyB,8BAAzB,CADiB,CAAnB;;AAAA;;;;gCAKEF,oBAAkB,GAAlB,EAAkB;AAAfC,OAAK,EAAC;AAAS,CAAlB,EAAe,IAAf,EAAe;AAAA;AAAf;;oBAAAE;;uBANJC,oBAQM,KARN,EAQM,IARN,EAQM,CAPJC,UAOI,EAJJL,oBAA8B,KAA9B,EAA8B,IAA9B,EAA8BM,iBAAtBC,mBAAsB,CAA9B,EAAqB;AAAA;AAArB,GAII,iBAHJH,oBAEM,KAFN,EAEM;AAFAI,UAAM,EAAEC,aAER;AAFiBC,SAAK,EAAED;AAExB,GAFN;;AAAA,eAGI,EARN","names":["_createElementVNode","class","for","_hoisted_3","_createElementBlock","_hoisted_1","_toDisplayString","$data","height","$props","width"],"sourceRoot":"","sources":["/Users/juliet/Documents/GitHub/thesis/thesis-app/sustainable-fashion/src/components/CountriesStep.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"slider\">\n      <label for=\"days-slider\">Number of forecasts to show:</label>\n    </div>\n    <div>{{ shortForecast }}</div>\n    <svg :height=\"height\" :width=\"width\">\n      <g class=\"bars\" />\n    </svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nconst margin = 20;\n\nconst DEFAULT_FORECAST = \"Hover for Forecast\";\n\nexport default {\n  name: \"CountriesStep\",\n  data() {\n    return {\n      days: 7,\n      shortForecast: DEFAULT_FORECAST,\n    };\n  },\n  props: {\n    data: Array,\n    height: Number,\n    width: Number,\n  },\n  computed: {\n    xScale() {\n      return d3\n        .scaleBand()\n        .padding(0.1)\n        .domain(this.data.map((d) => d.name))\n        .range([0, this.width]);\n    },\n    yScale() {\n      return d3\n        .scaleLinear()\n        .domain([\n          Math.min(\n            0,\n            d3.min(this.data, (d) => d.temperature)\n          ),\n          d3.max(this.data, (d) => d.temperature),\n        ])\n        .range([0, this.height - margin]);\n    },\n    rectWidth() {\n      return this.xScale.bandwidth();\n    },\n  },\n  updated() {\n    const that = this;\n    d3.select(\".bars\")\n      .selectAll(\"g.bar\")\n      .data((this.data || []).slice(0, this.days))\n      .join(\n        (enter) => {\n          const bar = enter.append(\"g\").attr(\"class\", \"bar\");\n          const rect = bar\n            .append(\"rect\")\n            .attr(\"width\", this.rectWidth)\n            .attr(\"height\", 0)\n            .attr(\"y\", this.height)\n            .attr(\"x\", (d) => this.xScale(d.name))\n            .attr(\"fill\", \"lightblue\");\n          rect\n            .transition()\n            .delay((_, i) => i * 50)\n            .attr(\"y\", (d) => this.height - this.yScale(d.temperature))\n            .attr(\"height\", (d) => this.yScale(d.temperature));\n\n          const nameText = bar\n            .append(\"text\")\n            .attr(\"class\", \"name-text\")\n            .attr(\"y\", this.height + this.rectWidth)\n            .attr(\"x\", (d) => this.xScale(d.name))\n            .attr(\n              \"transform\",\n              (d) => `rotate(-90 ${this.xScale(d.name)} ${this.height})`\n            )\n            .attr(\"opacity\", 0)\n            .text((d) => d.name);\n          nameText.transition().attr(\"opacity\", 1);\n\n          const tempText = bar\n            .append(\"text\")\n            .attr(\"class\", \"temp-text\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"x\", (d) => this.xScale(d.name) + this.rectWidth / 2)\n            .attr(\"y\", this.height)\n            .text((d) => d.temperature);\n          tempText\n            .transition()\n            .delay((_, i) => 100 + i * 50)\n            .attr(\"y\", (d) => this.height - this.yScale(d.temperature) - 5);\n\n          return bar;\n        },\n        (update) => {\n          update\n            .select(\"rect\")\n            .attr(\"fill\", \"lightgreen\")\n            .attr(\"width\", this.rectWidth)\n            .attr(\"x\", (d) => this.xScale(d.name));\n          update\n            .select(\".name-text\")\n            .attr(\"y\", this.height + this.rectWidth)\n            .attr(\"x\", (d) => this.xScale(d.name))\n            .attr(\n              \"transform\",\n              (d) => `rotate(-90 ${this.xScale(d.name)} ${this.height})`\n            );\n          update\n            .select(\".temp-text\")\n            .attr(\"x\", (d) => this.xScale(d.name) + this.rectWidth / 2);\n          return update;\n        },\n        (exit) => {\n          exit\n            .select(\"rect\")\n            .transition()\n            .attr(\"height\", 0)\n            .attr(\"y\", this.height)\n            .on(\"end\", () => {\n              exit.remove();\n            });\n          exit.select(\"text\").transition().attr(\"opacity\", 0);\n        }\n      )\n      .on(\"mouseenter\", (event, d) => {\n        that.shortForecast = d.shortForecast;\n      })\n      .on(\"mouseleave\", () => {\n        that.shortForecast = DEFAULT_FORECAST;\n      });\n  },\n};\n</script>\n\n<style>\n.slider {\n  max-width: 50%;\n  margin: 0 auto;\n}\ninput[type=\"range\"]::-webkit-slider-thumb {\n  cursor: ew-resize; /* grab */\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}